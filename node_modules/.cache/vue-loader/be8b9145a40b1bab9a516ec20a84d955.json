{"remainingRequest":"C:\\ws\\rak-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ws\\rak-front\\src\\components\\JogoCompra.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ws\\rak-front\\src\\components\\JogoCompra.vue","mtime":1655956849639},{"path":"C:\\ws\\rak-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655946238528},{"path":"C:\\ws\\rak-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1655946248007},{"path":"C:\\ws\\rak-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1655946238528},{"path":"C:\\ws\\rak-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1655946250137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBIZWFkZXJCYXIgZnJvbSAiLi9zaGFyZWQvSGVhZGVyQmFyQmFnLnZ1ZSI7CmltcG9ydCBGb290ZXJCYXIgZnJvbSAiLi9zaGFyZWQvRm9vdGVyQmFyLnZ1ZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgSGVhZGVyQmFyLAogICAgICAgIEZvb3RlckJhcgogICAgfSwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIGlkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQucmVwbGFjZSgiOiIsICIiKSwKICAgICAgICAgICAgam9nbzoge30sCiAgICAgICAgICAgIGpvZ29zOiBbXSwKICAgICAgICAgICAgdXN1YXJpbzoge30sCiAgICAgICAgICAgIGNsaWVudGU6IHt9LAogICAgICAgICAgICBtZXNzYWdlOiAiIiwKICAgICAgICAgICAgbWVzc2FnZUVycm9yOiAiIiwKICAgICAgICAgICAgbWVzc2FnZUJ1dHRvbjogJ0FkaWNpb25hciBqb2dvIMOgIHNhY29sYScsCiAgICAgICAgICAgIGRpc2FibGVkQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgc3Bhd25Db21wcmE6IHRydWUsCiAgICAgICAgICAgIHNwYXduRG93bmxvYWQ6IGZhbHNlCiAgICAgICAgfQogICAgICAgIAogICAgfSwKICAgIG1vdW50ZWQoKXsKICAgICAgICB0aGlzLmF0dWFsaXphUGFnaW5hKCk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGF0dWFsaXphUGFnaW5hKCl7CiAgICAgICAgICAgIHRoaXMudXN1YXJpbyA9IHRoaXMuJHJvb3QudXN1YXJpbzsKICAgICAgICAgICAgaWYodGhpcy51c3VhcmlvID09IG51bGwpewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ2xvZ2luJyB9KQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuJGh0dHAuZ2V0KCdodHRwczovL3Jha2dhbWVzaG9wLXByb2QuaGVyb2t1YXBwLmNvbS9hcGkvYWRtaW4vYnVzY2Fyam9nb3MnKS50aGVuKHJlcyA9PnsKICAgICAgICAgICAgICAgIHRoaXMuam9nb3MgPSByZXMuYm9keTsKICAgICAgICAgICAgICAgIHRoaXMuam9nb3MubWFwKGogPT4geyAgIAogICAgICAgICAgICAgICAgICAgIGlmKGouaWQgPT0gdGhpcy5pZCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuam9nbyA9IGo7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSwgcmVzID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLiRodHRwLnBvc3QoJ2h0dHBzOi8vcmFrZ2FtZXNob3AtcHJvZC5oZXJva3VhcHAuY29tL2FwaS9jbGllbnRlL2J1c2NhcmNsaWVudGUnLCB0aGlzLnVzdWFyaW8pLnRoZW4ocmVzID0+ewogICAgICAgICAgICAgICAgdGhpcy5jbGllbnRlID0gcmVzLmJvZHk7CiAgICAgICAgICAgICAgICB0aGlzLnZhbGlkYXJKb2dvKCk7CiAgICAgICAgICAgIH0sIHJlcyA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGZvcm1hdERhdGUoZGF0ZSkgewogICAgICAgICAgICBsZXQgZCA9IG5ldyBEYXRlKGRhdGUpOwogICAgICAgICAgICBsZXQgbW9udGggPSAoZC5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKTsKICAgICAgICAgICAgbGV0IGRheSA9IGQuZ2V0RGF0ZSgpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIGxldCB5ZWFyID0gZC5nZXRGdWxsWWVhcigpOwogICAgICAgICAgICBpZiAobW9udGgubGVuZ3RoIDwgMikgewogICAgICAgICAgICAgICAgbW9udGggPSAnMCcgKyBtb250aDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZGF5Lmxlbmd0aCA8IDIpIHsKICAgICAgICAgICAgICAgIGRheSA9ICcwJyArIGRheTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gW2RheSwgbW9udGgsIHllYXJdLmpvaW4oJy8nKTsKICAgICAgICB9LAogICAgICAgIHB1c2hQZWRpZG8oKXsKICAgICAgICAgICAgbGV0IGogPSBbXQogICAgICAgICAgICBqLnB1c2godGhpcy5qb2dvKTsKICAgICAgICAgICAgdGhpcy5wZWRpZG8gPSB7CiAgICAgICAgICAgICAgICBDbGllbnRlOiB0aGlzLmNsaWVudGUsCiAgICAgICAgICAgICAgICBKb2dvczogaiwKICAgICAgICAgICAgICAgIERhdGFDb21wcmE6ICIiLAogICAgICAgICAgICAgICAgRm9ybWFQYWdhbWVudG86IG51bGwsCiAgICAgICAgICAgICAgICBWYWxvclRvdGFsOiAwLAogICAgICAgICAgICAgICAgU3RhdHVzOiAwLAogICAgICAgICAgICAgICAgUGFyY2VsYW1lbnRvOiAxCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuJGh0dHAucG9zdCgnaHR0cHM6Ly9yYWtnYW1lc2hvcC1wcm9kLmhlcm9rdWFwcC5jb20vYXBpL2NsaWVudGUvYWRpY2lvbmFyJywgdGhpcy5wZWRpZG8pOwogICAgICAgIH0sCiAgICAgICAgdmFsaWRhckpvZ28oKXsKICAgICAgICAgICAgbGV0IHBlZGlkbyA9IHsKICAgICAgICAgICAgICAgIENsaWVudGU6IHRoaXMuY2xpZW50ZSwKICAgICAgICAgICAgICAgIEpvZ286IHRoaXMuam9nbwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuJGh0dHAucG9zdCgnaHR0cHM6Ly9yYWtnYW1lc2hvcC1wcm9kLmhlcm9rdWFwcC5jb20vYXBpL2NsaWVudGUvdmVyaWZpY2Fyam9nb3NhY29sYScsIHBlZGlkbykudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgaWYocmVzLnN0YXR1cyA9PSAyMDEpewogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZUJ1dHRvbiA9ICdKb2dvIGrDoSBhZGljaW9uYWRvJwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRCdXR0b24gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc3Bhd25Db21wcmEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNwYXduRG93bmxvYWQgPSBmYWxzZTsgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmKHJlcy5zdGF0dXMgPT0gMjA0KXsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VCdXR0b24gPSAnSm9nbyBqw6EgYWRxdWlyaWRvJwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRCdXR0b24gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc3Bhd25Db21wcmEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNwYXduRG93bmxvYWQgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzLnN0YXR1cyA9PSAyMDApewogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZUJ1dHRvbiA9ICdBZGljaW9uYXIgam9nbyDDoCBzYWNvbGEnCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlZEJ1dHRvbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc3Bhd25Db21wcmEgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc3Bhd25Eb3dubG9hZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAKICAgICAgICB9LAogICAgICAgIHJlZGlyZWN0Q1NhY29sYSgpewogICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAncGF5bWVudE1ldGhvZCcgfSkKICAgICAgICB9LAogICAgICAgIGFkaWNpb25hckpvZ29TYWNvbGEoY29tcHJhKXsKICAgICAgICAgICAgbGV0IHBlZGlkbyA9IHsKICAgICAgICAgICAgICAgIENsaWVudGU6IHRoaXMuY2xpZW50ZSwKICAgICAgICAgICAgICAgIEpvZ286IHRoaXMuam9nbwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuJGh0dHAucG9zdCgnaHR0cHM6Ly9yYWtnYW1lc2hvcC1wcm9kLmhlcm9rdWFwcC5jb20vYXBpL2NsaWVudGUvYWRpY2lvbmFyam9nb3NhY29sYScsIHBlZGlkbykudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgaWYocmVzLnN0YXR1cyA9PSAyMDQpewogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZUVycm9yID0gIkpvZ28gasOhIGFkcXVpcmlkbyI7CiAgICAgICAgICAgICAgICB9ZWxzZSBpZihyZXMuc3RhdHVzID09IDIwMSl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlRXJyb3IgPSAiSm9nbyBqw6EgYWRpY2lvbmFkbyIKICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJlcy5zdGF0dXMgPT0gMjAyKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VFcnJvciA9ICJFcnJvIGFvIGFkaWNpb25hciIKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9ICJKb2dvIEFkaWNpb25hZG8hIjsKICAgICAgICAgICAgICAgICAgICBpZihjb21wcmEpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdwYXltZW50TWV0aG9kJyB9KQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdzdG9yZScgfSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHJlcyA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAKICAgICAgICB9CiAgICB9Cn0KCg=="},{"version":3,"sources":["JogoCompra.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"JogoCompra.vue","sourceRoot":"src/components","sourcesContent":["<script>\r\n    import HeaderBar from \"./shared/HeaderBarBag.vue\";\r\n    import FooterBar from \"./shared/FooterBar.vue\";\r\n\r\n    export default {\r\n        components: {\r\n            HeaderBar,\r\n            FooterBar\r\n        },\r\n        data(){\r\n            return{\r\n                id: this.$route.params.id.replace(\":\", \"\"),\r\n                jogo: {},\r\n                jogos: [],\r\n                usuario: {},\r\n                cliente: {},\r\n                message: \"\",\r\n                messageError: \"\",\r\n                messageButton: 'Adicionar jogo à sacola',\r\n                disabledButton: false,\r\n                spawnCompra: true,\r\n                spawnDownload: false\r\n            }\r\n            \r\n        },\r\n        mounted(){\r\n            this.atualizaPagina();\r\n        },\r\n        methods: {\r\n            atualizaPagina(){\r\n                this.usuario = this.$root.usuario;\r\n                if(this.usuario == null){\r\n                    return this.$router.push({ name: 'login' })\r\n                }\r\n                this.$http.get('https://rakgameshop-prod.herokuapp.com/api/admin/buscarjogos').then(res =>{\r\n                    this.jogos = res.body;\r\n                    this.jogos.map(j => {   \r\n                        if(j.id == this.id){\r\n                            this.jogo = j;\r\n                        }\r\n                    })\r\n                }, res => {\r\n                    console.log(res);\r\n                });\r\n                this.$http.post('https://rakgameshop-prod.herokuapp.com/api/cliente/buscarcliente', this.usuario).then(res =>{\r\n                    this.cliente = res.body;\r\n                    this.validarJogo();\r\n                }, res => {\r\n                    console.log(res);\r\n                });\r\n            },\r\n            formatDate(date) {\r\n                let d = new Date(date);\r\n                let month = (d.getMonth() + 1).toString();\r\n                let day = d.getDate().toString();\r\n                let year = d.getFullYear();\r\n                if (month.length < 2) {\r\n                    month = '0' + month;\r\n                }\r\n                if (day.length < 2) {\r\n                    day = '0' + day;\r\n                }\r\n                return [day, month, year].join('/');\r\n            },\r\n            pushPedido(){\r\n                let j = []\r\n                j.push(this.jogo);\r\n                this.pedido = {\r\n                    Cliente: this.cliente,\r\n                    Jogos: j,\r\n                    DataCompra: \"\",\r\n                    FormaPagamento: null,\r\n                    ValorTotal: 0,\r\n                    Status: 0,\r\n                    Parcelamento: 1\r\n                };\r\n                this.$http.post('https://rakgameshop-prod.herokuapp.com/api/cliente/adicionar', this.pedido);\r\n            },\r\n            validarJogo(){\r\n                let pedido = {\r\n                    Cliente: this.cliente,\r\n                    Jogo: this.jogo\r\n                }\r\n                this.$http.post('https://rakgameshop-prod.herokuapp.com/api/cliente/verificarjogosacola', pedido).then(res => {\r\n                    if(res.status == 201){\r\n                        this.messageButton = 'Jogo já adicionado'\r\n                        this.disabledButton = true;\r\n                        this.spawnCompra = false;\r\n                        this.spawnDownload = false; \r\n                    }\r\n                    else if(res.status == 204){\r\n                        this.messageButton = 'Jogo já adquirido'\r\n                        this.disabledButton = true;\r\n                        this.spawnCompra = false;\r\n                        this.spawnDownload = true;\r\n                    }\r\n                    else if (res.status == 200){\r\n                        this.messageButton = 'Adicionar jogo à sacola'\r\n                        this.disabledButton = false;\r\n                        this.spawnCompra = true;\r\n                        this.spawnDownload = false;\r\n                    }\r\n                })\r\n                \r\n            },\r\n            redirectCSacola(){\r\n                 this.$router.push({ name: 'paymentMethod' })\r\n            },\r\n            adicionarJogoSacola(compra){\r\n                let pedido = {\r\n                    Cliente: this.cliente,\r\n                    Jogo: this.jogo\r\n                }\r\n                this.$http.post('https://rakgameshop-prod.herokuapp.com/api/cliente/adicionarjogosacola', pedido).then(res => {\r\n                    if(res.status == 204){\r\n                        this.messageError = \"Jogo já adquirido\";\r\n                    }else if(res.status == 201){\r\n                        this.messageError = \"Jogo já adicionado\"\r\n                    }else if(res.status == 202){\r\n                        this.messageError = \"Erro ao adicionar\"\r\n                    }else{\r\n                        this.message = \"Jogo Adicionado!\";\r\n                        if(compra){\r\n                            this.$router.push({ name: 'paymentMethod' })\r\n                        }else{\r\n                            this.$router.push({ name: 'store' })\r\n                        }\r\n                    }\r\n                }, res => {\r\n                    console.log(res);\r\n                })\r\n                \r\n            }\r\n        }\r\n    }\r\n    \r\n</script>\r\n\r\n<template>  \r\n    <div>\r\n        <HeaderBar />\r\n        <div class=\"container-fluid detail-container\" style=\"margin-top: 70px\">\r\n            <div class=\"container-fluid\">\r\n                <div class=\"row justify-content-center\">\r\n                    <div class=\"col mt-4\" style=\"margin-left: 15px\">\r\n                        <img :src=\"require(`../assets/${jogo.urlFoto}`)\" class=\"d-block w-100\" />\r\n                    </div>\r\n                    <div class=\"col\" style=\"text-align: center; margin-top: 100px; padding-right: 80px;\">    \r\n                        <h2>{{jogo.nome}}</h2>\r\n                        <div style=\"text-align: center; margin-top: 200px;\">\r\n                            <h4>R$ {{jogo.valor.toFixed(2)}}</h4>\r\n                        </div>\r\n                        <div style=\"align-items: center;\">\r\n                            <div v-if=\"spawnCompra\" class=\"d-grid gap-2 col-5 mx-auto mt-4\">\r\n                                <button class=\"btn btn-lg btt-submit\" @click=\"adicionarJogoSacola(true)\">Comprar Agora</button>\r\n                            </div>\r\n                            <div class=\"d-grid gap-2 col-5 mx-auto mt-4\" >\r\n                                <button class=\"btn btn-lg btt-outline-submit\" @click=\"adicionarJogoSacola(false)\" :disabled=\"disabledButton\">{{this.messageButton}}</button>\r\n                            </div>\r\n                            <div v-if=\"messageButton == 'Jogo já adicionado'\" class=\"d-grid gap-2 col-5 mx-auto mt-4\">\r\n                                <button class=\"btn btn-lg btt-submit\" @click=\"redirectCSacola()\">Ir para sacola</button>\r\n                            </div>\r\n                            <div v-if=\"spawnDownload\" class=\"d-grid gap-2 col-5 mx-auto mt-4\">\r\n                                <a class=\"btn btn-lg btt-submit\" type=\"button\" :href=\"require(`../assets/${jogo.urlFoto}`)\" download=\"\">Download</a>\r\n                            </div>\r\n                             <div v-if=\"message\" class=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\r\n                                {{ message }}\r\n                                <button type=\"button\" @click=\"message = null\" data-dismiss=\"alert\"\r\n                                    aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                            <div v-if=\"messageError\" class=\"alert alert-danger alert-dismissible fade show\"\r\n                                role=\"alert\">\r\n                                {{ messageError }}\r\n                                <button type=\"button\" @click=\"messageError = null\" data-dismiss=\"alert\"\r\n                                    aria-label=\"Close\">\r\n                                    <span aria-hidden=\"true\">&times;</span>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row justify-content-left\">\r\n                    <div class=\"col-3 mt-1\" style=\"margin-left: 15px\">\r\n                        <p><b>{{jogo.descricao}}</b></p><br>\r\n                    </div>\r\n                    <div class=\"col-3 mt-1 mb-5\" style=\"margin-left: 15px\">\r\n                        <p><b>Data de Lançamento: </b>{{formatDate(jogo.dataLancamento)}}</p><br>\r\n                        <p><b>Categoria: </b>{{jogo.categoria}}</p>\r\n                        <p><b>Calssificação: </b>{{jogo.classificacao}}</p>\r\n                        <p><b>Tamanho: </b>{{jogo.tamanho}}</p>\r\n                        <p><b>Desenvolvedora: </b>{{jogo.desenvolvedora}}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <FooterBar />\r\n    </div>\r\n</template>\r\n\r\n\r\n<style scoped>\r\n    .detail-container{\r\n        color: #ffff;\r\n    }\r\n\r\n    .btt-submit{\r\n        color: #ffff;\r\n        background-color: #340E80;\r\n    }\r\n\r\n    .btt-submit:hover{\r\n        color: #ffff;\r\n        background-color: #7e64b3;\r\n    }\r\n\r\n    .btt-outline-submit{\r\n        color: #ffff;\r\n        border: 1px solid #340E80;\r\n    }\r\n\r\n    .btt-outline-submit:hover{\r\n        color: #ffff;\r\n        border: 1px solid #340E80;\r\n        background-color: #413f3f;\r\n    }\r\n</style>"]}]}